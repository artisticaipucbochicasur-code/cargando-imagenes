<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>La Aventura de ElÃ­zabeth</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: url('https://i.imgur.com/wtVx0mD.png') center/cover no-repeat;
  }
  #game {
    position: relative;
    width: 100vw;
    height: 100vh;
  }
  .elizabeth {
    position: absolute;
    bottom: 50px;
    left: 100px;
    width: 120px;
    height: 150px;
    background: url('https://i.imgur.com/0O2tHkW.png') center/contain no-repeat;
    transition: left 0.2s, bottom 0.2s;
  }
  .item {
    position: absolute;
    width: 60px;
    height: 60px;
  }
  #message {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255,255,255,0.8);
    padding: 15px 25px;
    border-radius: 10px;
    font-size: 24px;
    display: none;
  }
  #level {
    position: absolute;
    top: 20px;
    left: 20px;
    background: rgba(255,255,255,0.7);
    padding: 10px 15px;
    border-radius: 8px;
    font-weight: bold;
  }
</style>
</head>
<body>
<div id="game">
  <div id="elizabeth" class="elizabeth"></div>
  <div id="message"></div>
  <div id="level">Nivel 1: Recoge las flores ðŸŒ¸</div>
</div>

<!-- Sonidos -->
<audio id="pickupSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_86f9e2e3f5.mp3?filename=collect-coin-2-2043.mp3"></audio>
<audio id="winSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_62cc9b1d57.mp3?filename=success-fanfare-trumpets-6185.mp3"></audio>
<audio id="ohnoSound" src="https://cdn.pixabay.com/download/audio/2021/09/23/audio_8e4e8f7ef4.mp3?filename=error-126627.mp3"></audio>

<script>
const game = document.getElementById("game");
const elizabeth = document.getElementById("elizabeth");
const message = document.getElementById("message");
const levelText = document.getElementById("level");
const pickupSound = document.getElementById("pickupSound");
const winSound = document.getElementById("winSound");
const ohnoSound = document.getElementById("ohnoSound");

let posX = 100, posY = 50;
let level = 1;
let items = [];

function showMessage(text, color="black") {
  message.style.display = "block";
  message.style.color = color;
  message.innerText = text;
  setTimeout(()=> message.style.display = "none", 2000);
}

function nextLevel() {
  level++;
  if (level === 2) {
    startLevel2();
  } else if (level === 3) {
    startLevel3();
  } else {
    levelText.innerText = "Â¡Ganaste el juego! ðŸŽ‰";
    showMessage("Excelente, ElÃ­zabeth completÃ³ la aventura!", "green");
    winSound.play();
  }
}

function clearItems() {
  items.forEach(i => i.remove());
  items = [];
}

// --- Nivel 1: Recoger flores ---
function startLevel1() {
  levelText.innerText = "Nivel 1: Recoge las flores ðŸŒ¸";
  for (let i = 0; i < 5; i++) {
    const flower = document.createElement("img");
    flower.src = "https://i.imgur.com/xl5mQ1J.png";
    flower.classList.add("item");
    flower.style.left = Math.random() * (window.innerWidth - 60) + "px";
    flower.style.bottom = Math.random() * 200 + "px";
    game.appendChild(flower);
    items.push(flower);
  }
}

// --- Nivel 2: Saltar charcos ---
function startLevel2() {
  clearItems();
  levelText.innerText = "Nivel 2: Evita los charcos ðŸ’¦";
  for (let i = 0; i < 4; i++) {
    const puddle = document.createElement("img");
    puddle.src = "https://i.imgur.com/3GAD4lD.png";
    puddle.classList.add("item");
    puddle.style.left = Math.random() * (window.innerWidth - 60) + "px";
    puddle.style.bottom = "0px";
    game.appendChild(puddle);
    items.push(puddle);
  }
}

// --- Nivel 3: Buscar estrellas ---
function startLevel3() {
  clearItems();
  levelText.innerText = "Nivel 3: Encuentra las estrellas âœ¨";
  for (let i = 0; i < 6; i++) {
    const star = document.createElement("img");
    star.src = "https://i.imgur.com/rCwYh1u.png";
    star.classList.add("item");
    star.style.left = Math.random() * (window.innerWidth - 60) + "px";
    star.style.bottom = Math.random() * 200 + "px";
    game.appendChild(star);
    items.push(star);
  }
}

function moveElizabeth(dx, dy) {
  posX += dx;
  posY += dy;
  elizabeth.style.left = posX + "px";
  elizabeth.style.bottom = posY + "px";
  checkCollisions();
}

function checkCollisions() {
  const lizRect = elizabeth.getBoundingClientRect();
  let collected = 0;
  items.forEach((item, i) => {
    const r = item.getBoundingClientRect();
    if (lizRect.left < r.right && lizRect.right > r.left && lizRect.bottom > r.top && lizRect.top < r.bottom) {
      if (level === 1 || level === 3) {
        pickupSound.play();
        item.remove();
        items.splice(i, 1);
        if (items.length === 0) nextLevel();
      } else if (level === 2) {
        ohnoSound.play();
        showMessage("Â¡Oh no, te mojaste!", "red");
      }
    }
  });
}

document.addEventListener("keydown", (e)=>{
  switch(e.key) {
    case "ArrowRight": moveElizabeth(30,0); break;
    case "ArrowLeft": moveElizabeth(-30,0); break;
    case "ArrowUp": moveElizabeth(0,20); break;
    case "ArrowDown": moveElizabeth(0,-20); break;
  }
});

// Inicia juego
startLevel1();
</script>
</body>
</html>
