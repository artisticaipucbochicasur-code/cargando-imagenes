<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aventura de El√≠zabeth - Nivel 1</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #a8e6cf;
    touch-action: manipulation;
    font-family: 'Comic Sans MS', sans-serif;
  }

  #juego {
    position: relative;
    width: 100vw;
    height: 100vh;
    background: url('https://i.imgur.com/0ueX9v5.jpg') center/cover no-repeat;
  }

  #elizabeth {
    position: absolute;
    bottom: 60px;
    left: 100px;
    width: 90px;
    height: 120px;
    background: url('https://i.imgur.com/XBlMLbL.png') center/contain no-repeat;
    transition: left 0.1s, bottom 0.1s;
  }

  .flor {
    position: absolute;
    width: 60px;
    height: 60px;
  }

  #mensaje {
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255,255,255,0.8);
    padding: 8px 20px;
    border-radius: 10px;
    font-size: 22px;
    display: none;
    animation: aparecer 0.3s;
  }

  @keyframes aparecer {
    from { opacity: 0; transform: translate(-50%, -10px); }
    to { opacity: 1; transform: translate(-50%, 0); }
  }

  #controles {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: grid;
    grid-template-columns: 70px 70px 70px;
    grid-template-rows: 70px 70px;
    gap: 8px;
    justify-items: center;
    align-items: center;
  }

  .btn {
    width: 70px;
    height: 70px;
    background: rgba(255,255,255,0.7);
    border-radius: 50%;
    font-size: 30px;
    text-align: center;
    line-height: 70px;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
    user-select: none;
  }

  .btn:active {
    background: rgba(180,255,180,0.9);
  }

  #arriba { grid-column: 2; grid-row: 1; }
  #izquierda { grid-column: 1; grid-row: 2; }
  #abajo { grid-column: 2; grid-row: 2; }
  #derecha { grid-column: 3; grid-row: 2; }

</style>
</head>
<body>
  <div id="juego">
    <div id="mensaje">üå∏ Recoge todas las flores üå∏</div>
    <div id="elizabeth"></div>
    <div id="controles">
      <div id="arriba" class="btn">‚¨ÜÔ∏è</div>
      <div id="izquierda" class="btn">‚¨ÖÔ∏è</div>
      <div id="abajo" class="btn">‚¨áÔ∏è</div>
      <div id="derecha" class="btn">‚û°Ô∏è</div>
    </div>
  </div>

  <!-- Sonidos -->
  <audio id="sonidoFlor" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_7b8ff7b65d.mp3?filename=collectcoin-6075.mp3"></audio>
  <audio id="sonidoVictoria" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_62cc9b1d57.mp3?filename=success-fanfare-trumpets-6185.mp3"></audio>
  <audio id="sonidoError" src="https://cdn.pixabay.com/download/audio/2021/09/23/audio_8e4e8f7ef4.mp3?filename=error-126627.mp3"></audio>

<script>
const juego = document.getElementById("juego");
const elizabeth = document.getElementById("elizabeth");
const mensaje = document.getElementById("mensaje");
const sonidoFlor = document.getElementById("sonidoFlor");
const sonidoVictoria = document.getElementById("sonidoVictoria");
const sonidoError = document.getElementById("sonidoError");

let posX = 100, posY = 60;
let flores = [];

function mostrarMensaje(texto, color="black") {
  mensaje.style.display = "block";
  mensaje.style.color = color;
  mensaje.innerText = texto;
  setTimeout(() => mensaje.style.display = "none", 2000);
}

function crearFlores() {
  for (let i = 0; i < 5; i++) {
    const flor = document.createElement("img");
    flor.src = "https://i.imgur.com/Hvh5wxM.png";
    flor.classList.add("flor");
    flor.style.left = Math.random() * (window.innerWidth - 60) + "px";
    flor.style.bottom = Math.random() * 250 + "px";
    juego.appendChild(flor);
    flores.push(flor);
  }
}

function mover(dx, dy) {
  posX = Math.min(Math.max(0, posX + dx), window.innerWidth - 100);
  posY = Math.min(Math.max(0, posY + dy), window.innerHeight - 200);
  elizabeth.style.left = posX + "px";
  elizabeth.style.bottom = posY + "px";
  verificarColisiones();
}

function verificarColisiones() {
  const rectE = elizabeth.getBoundingClientRect();
  flores.forEach((flor, i) => {
    const rectF = flor.getBoundingClientRect();
    if (rectE.left < rectF.right && rectE.right > rectF.left && rectE.bottom > rectF.top && rectE.top < rectF.bottom) {
      sonidoFlor.currentTime = 0;
      sonidoFlor.play();
      flor.remove();
      flores.splice(i, 1);
      if (flores.length === 0) {
        mostrarMensaje("üéâ ¬°Nivel completado! üéâ", "green");
        sonidoVictoria.play();
        setTimeout(() => mostrarMensaje("‚ú® Pr√≥ximamente: Nivel 2 ‚ú®", "purple"), 3000);
      }
    }
  });
}

// Controles t√°ctiles
document.getElementById("arriba").addEventListener("click", ()=> mover(0, 30));
document.getElementById("abajo").addEventListener("click", ()=> mover(0, -30));
document.getElementById("izquierda").addEventListener("click", ()=> mover(-30, 0));
document.getElementById("derecha").addEventListener("click", ()=> mover(30, 0));

// Iniciar juego
crearFlores();
mostrarMensaje("üå∏ Recoge todas las flores üå∏");
</script>
</body>
</html>
